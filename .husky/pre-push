#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

pnpm test:telemetry

# Validate Convex functions can bundle (catches Node.js import errors)
echo "ğŸ” Validating Convex functions..."
npx convex dev --once --typecheck enable || {
  echo "âŒ Convex validation failed - likely importing Node.js modules"
  echo "See: https://docs.convex.dev/functions/runtimes"
  exit 1
}
echo "âœ… Convex validation passed"
